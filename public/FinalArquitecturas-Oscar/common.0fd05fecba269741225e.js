(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Qosg:function(e,r,o){"use strict";o.d(r,"a",(function(){return u}));var t=o("3Pt+"),i=o("quSY"),s=o("fXoL"),a=o("/sur"),n=o("UDAh"),d=o("tyNb"),b=o("ofXK");function l(e,r){if(1&e&&(s.Kb(0,"option",12),s.ac(1),s.Jb()),2&e){const e=r.$implicit;s.Ub("value",e),s.xb(1),s.bc(e)}}function c(e,r){if(1&e&&(s.Kb(0,"button",13),s.ac(1,"Registrar proveedor"),s.Jb()),2&e){const e=s.Tb();s.Ub("disabled",e.isFormValid)}}function m(e,r){if(1&e&&(s.Kb(0,"button",13),s.ac(1,"Editar proveedor"),s.Jb()),2&e){const e=s.Tb();s.Ub("disabled",e.isFormValid)}}let u=(()=>{class e{constructor(e,r,o,t,s){this.fb=e,this.swas=r,this.ps=o,this.route=t,this.router=s,this.proveedor=!1,this.areas=[],this.proveedorSubscription$=new i.a,this.createForm(),this.areas=["Almac\xe9n","Tortiller\xeda","Cocimiento","Sistemas"]}ngOnInit(){if(this.proveedor){const e=this.route.snapshot.paramMap.get("id");this.proveedorSubscription$.add(this.ps.getProveedorById(e).subscribe(e=>{e.ok&&(this.proveedorObject=e.proveedor,this.fillForm())},e=>{this.router.navigateByUrl("/proveedores")}))}}get isFormValid(){return this.form.invalid}get isNameValid(){const e=this.form.get("name");return e.invalid&&e.touched}get isCompanyValid(){const e=this.form.get("company");return e.touched&&e.invalid}get isAddressValid(){const e=this.form.get("address");return e.touched&&e.invalid}get isEmailValid(){const e=this.form.get("email");return e.touched&&e.invalid}get isPhoneNumberValid(){const e=this.form.get("phoneNumber");return e.touched&&e.invalid}createForm(){this.form=this.fb.group({area:["",[t.k.required]],name:["",[t.k.required,t.k.maxLength(300),t.k.minLength(10)]],company:["",[t.k.required,t.k.minLength(5)]],address:["",t.k.required],email:["",[t.k.required,t.k.email]],phoneNumber:["",[t.k.required,t.k.minLength(10),t.k.maxLength(10)]]})}saveData(){this.proveedor&&this.form.valid?(this.swas.showLoading("Editando","Por favor espere mientras se actualiza el proveedor..."),this.editProvider()):this.form.valid&&(this.swas.showLoading("Registrando","Por favor espere mientras se registra el proveedor..."),this.newProvider())}newProvider(){this.proveedorSubscription$.add(this.ps.nuevoProveedor(this.form.value).subscribe(e=>{this.swas.hideLoading(),e.ok?this.swas.showGenericAlert("Nice!",e.message,"success"):e.error&&this.swas.showGenericAlert("Error","Hubo un error al registrar el proveedor, verifique los datos","error")}))}editProvider(){this.proveedorSubscription$.add(this.ps.editarProveedor(this.proveedorObject._id,this.form.value).subscribe(e=>{e.ok&&this.swas.showGenericAlert("Nice",e.message,"success")},e=>{e.error.message?this.swas.showGenericAlert("Error",e.error.message,"error"):this.swas.showGenericAlert("Bad Request","Hubo un error al editar el proveedor, verifique los datos","error")}))}fillForm(){this.form.get("area").setValue(this.proveedorObject.area),this.form.get("name").setValue(this.proveedorObject.name),this.form.get("company").setValue(this.proveedorObject.company),this.form.get("address").setValue(this.proveedorObject.address),this.form.get("email").setValue(this.proveedorObject.email),this.form.get("phoneNumber").setValue(this.proveedorObject.phoneNumber)}ngOnDestroy(){this.proveedorSubscription$.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(s.Hb(t.b),s.Hb(a.a),s.Hb(n.a),s.Hb(d.a),s.Hb(d.c))},e.\u0275cmp=s.Bb({type:e,selectors:[["app-proveedor-form"]],inputs:{proveedor:"proveedor"},decls:32,vars:14,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","area",1,"form-control"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Escribe un nombre","formControlName","name",1,"form-control"],["type","text","placeholder","Escribe el nombre de la empresa","formControlName","company",1,"form-control"],["type","text","placeholder","Escribe la direcci\xf3n","formControlName","address",1,"form-control"],["type","email","placeholder","Escribe el correo electr\xf3nico","formControlName","email",1,"form-control"],["type","tel","placeholder","Escribe un n\xfamero de tel\xe9fono","formControlName","phoneNumber",1,"form-control"],["type","submit","class","btn btn-success",3,"disabled",4,"ngIf"],["routerLink","/proveedores",1,"btn","btn-secondary","ml-3"],[3,"value"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,r){1&e&&(s.Kb(0,"form",0),s.Rb("ngSubmit",(function(){return r.saveData()})),s.Kb(1,"div",1),s.Kb(2,"label"),s.ac(3,"\xc1rea"),s.Jb(),s.Kb(4,"select",2),s.Kb(5,"option",3),s.ac(6,"Selecciona un \xe1rea"),s.Jb(),s.Zb(7,l,2,2,"option",4),s.Jb(),s.Jb(),s.Kb(8,"div",1),s.Kb(9,"label"),s.ac(10,"Nombre"),s.Jb(),s.Ib(11,"input",5),s.Jb(),s.Kb(12,"div",1),s.Kb(13,"label"),s.ac(14,"Empresa"),s.Jb(),s.Ib(15,"input",6),s.Jb(),s.Kb(16,"div",1),s.Kb(17,"label"),s.ac(18,"Address"),s.Jb(),s.Ib(19,"input",7),s.Jb(),s.Kb(20,"div",1),s.Kb(21,"label"),s.ac(22,"Email"),s.Jb(),s.Ib(23,"input",8),s.Jb(),s.Kb(24,"div",1),s.Kb(25,"label"),s.ac(26,"N\xfamero de tel\xe9fono"),s.Jb(),s.Ib(27,"input",9),s.Jb(),s.Zb(28,c,2,1,"button",10),s.Zb(29,m,2,1,"button",10),s.Kb(30,"a",11),s.ac(31,"Regresar"),s.Jb(),s.Jb()),2&e&&(s.Ub("formGroup",r.form),s.xb(7),s.Ub("ngForOf",r.areas),s.xb(4),s.zb("is-invalid",r.isNameValid),s.xb(4),s.zb("is-invalid",r.isCompanyValid),s.xb(4),s.zb("is-invalid",r.isAddressValid),s.xb(4),s.zb("is-invalid",r.isEmailValid),s.xb(4),s.zb("is-invalid",r.isPhoneNumberValid),s.xb(1),s.Ub("ngIf",!r.proveedor),s.xb(1),s.Ub("ngIf",r.proveedor))},directives:[t.m,t.g,t.d,t.j,t.f,t.c,t.h,t.l,b.h,t.a,b.i,d.d],styles:[""]}),e})()}}]);